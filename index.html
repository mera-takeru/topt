<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pertonal -パートナル-</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="パートナル - 音と色の性格診断">
  <meta name="twitter:description" content="音と色であなたの性格を診断！MBTIの次はコレ！今すぐ無料でチェック！">
  <meta name="twitter:image" content="">
  <meta property="og:image" content=""> <!-- Fallback for other platforms -->
  <style>
 :root {
  --primary: #6C63FF;
  --secondary: #FF6584;
  --bg: #F9FAFB;
  --text: #333;
  --radius: 12px;
  --transition: .3s;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

a {
  color: inherit !important;
  text-decoration: none;
}a:visited, a:link, a:active {
  color: inherit !important;
}body {
  font-family: 'Inter', sans-serif;
  background: linear-gradient(
    45deg,
    rgba(255, 99, 71, 0.1),
    rgba(255, 165, 0, 0.1),
    rgba(255, 255, 0, 0.1),
    rgba(50, 205, 50, 0.1),
    rgba(0, 191, 255, 0.1),
    rgba(75, 0, 130, 0.1),
    rgba(238, 130, 238, 0.1)
  );
  background-size: 400%;
  color: var(--text);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh;
  padding: 16px;
  animation: rainbow 8s ease infinite;
}@keyframes rainbow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}.container {
  width: 100%;
  max-width: 600px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: var(--radius);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  padding: 24px;
  margin: 16px auto;
}header {
  background: rgba(255, 255, 255, 0.9);
  padding: 12px;
  border-bottom: 1px solid #ddd;
  width: 100%;
  text-align: center;
  box-sizing: border-box;
}.header-nav {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
}header .header-nav a {
  text-decoration: none;
  color: #000000 !important;
  font-weight: 400;
  font-size: 0.75rem;
  padding: 0 6px;
  transition: color var(--transition);
}header .header-nav a:hover {
  color: var(--secondary);
}header .header-nav .divider {
  color: #000000 !important;
  font-size: 0.75rem;
  font-weight: 400;
}footer {
  background: rgba(255, 255, 255, 0.9);
  padding: 12px;
  border-top: 1px solid #ddd;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
}.footer-nav {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
}footer .footer-nav a {
  text-decoration: none;
  color: #000000 !important;
  font-weight: 400;
  font-size: 0.75rem;
  padding: 0 6px;
  transition: color var(--transition);
}footer .footer-nav a:hover {
  color: var(--secondary);
}footer .footer-nav .divider {
  color: #000000 !important;
  font-size: 0.75rem;
  font-weight: 400;
}.copyright {
  font-family: 'Inter', sans-serif;
  font-size: 0.75rem;
  font-weight: 400;
  color: #000000;
  text-align: center;
  margin-top: 8px;
}h1 {
  text-align: center;
  font-weight: 700;
  margin-bottom: 16px;
  color: var(--primary);
}.title-topt {
  font-weight: 700;
  text-align: center;
  display: block;
  margin-bottom: 8px;
  color: var(--secondary);
  text-shadow: 
    1px 1px 2px rgba(0, 0, 0, 0.3),
    0 0 4px rgba(255, 255, 255, 0.5);
  letter-spacing: 0.5px;
}.title-english {
  font-size: 2rem;
  font-weight: 700;
}.title-japanese {
  font-size: 1.25rem;
  font-weight: 700;
}.title-sub {
  font-size: 1rem;
  display: block;
}.screen {
  display: none;
}.screen.active {
  display: block;
}button {
  font: inherit;
  font-size: 1rem;
  padding: 12px 20px;
  border: none;
  border-radius: var(--radius);
  background: var(--primary);
  color: #fff;
  cursor: pointer;
  transition: background var(--transition), transform var(--transition);
}button:hover {
  background: var(--secondary);
  transform: scale(1.02);
}#startBtn {
  width: 100%;
  margin-top: 12px;
}.progress-bar {
  height: 8px;
  background: #eee;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 16px;
}.progress-inner {
  height: 100%;
  background: var(--primary);
  width: 0%;
  transition: width var(--transition);
}.question h2 {
  font-size: 1.25rem;
  margin-bottom: 16px;
}.options {
  list-style: none;
  padding: 0;
  margin-bottom: 24px;
}.options li {
  margin-bottom: 12px;
}.options li.selected button {
  background: var(--secondary);
  color: #fff;
}.options button {
  width: 100%;
  text-align: left;
  background: #f9f9f9;
  color: var(--text);
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: var(--radius);
  transition: background var(--transition), border-color var(--transition);
}.options button:hover {
  background: var(--primary);
  color: #fff;
  border-color: var(--primary);
}.nav {
  display: flex;
  justify-content: space-between;
}.share-row, .goods-row, .restart-row {
  display: flex;
  width: 100%;
  margin-top: 16px;
  margin-bottom: 16px;
  flex-wrap: nowrap;
}.share-row button, .goods-row button, .restart-row button {
  flex: 1;
}#shareXBtn {
  background: #1DA1F2;
}#goodsBtn {
  background: var(--primary);
  color: #fff;
  flex: 1;
}#goodsBtn:hover {
  background: var(--secondary);
  transform: scale(1.02);
}.restart-row button {
  flex: 1;
  background: #fff;
  color: var(--primary);
  border: 1px solid var(--primary);
}.start-image, .result-image {
  width: 100%;
  background: #ecebff;
  border-radius: var(--radius);
  margin-bottom: 16px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  aspect-ratio: 3 / 2; /* PCでは3:2 */
}.start-image picture, .start-image img {
  width: 100%;
  height: auto;
  object-fit: contain;
}.result-image {
  width: 100%;
  background: #ecebff;
  border-radius: var(--radius);
  margin-bottom: 16px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  aspect-ratio: 4 / 3;
}.result-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}#resultText .result-description-first {
  font-size: 1.25rem !important;
  font-weight: 700 !important;
  color: #000000 !important; 
  margin-bottom: 8px;
}.accordion {
  margin-bottom: 16px;
}.accordion-toggle {
  background: var(--primary);
  color: #fff;
  border: none;
  padding: 8px 16px;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 1rem;
  margin-top: 8px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: background var(--transition), transform var(--transition);
}.accordion-toggle:hover {
  background: var(--secondary);
  transform: scale(1.02);
}.accordion-toggle .arrow {
  font-size: 0.9rem;
}.accordion-content {
  margin-top: 8px;
  font-size: 1rem;
  line-height: 1.5;
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
}.accordion-content.open {
  opacity: 1;
  max-height: 1000px; /* 十分な高さを設定（動的に調整するため問題なし） */
}@media (max-width: 600px) {
  .start-image {
    max-width: 100%;
    margin-bottom: 12px;
    aspect-ratio: 1 / 1;
  }
  .result-image {
    max-width: 100%;
    margin-bottom: 12px;
    aspect-ratio: 4 / 3; /* Maintain 4:3 on mobile */
  }
  .title-english {
    font-size: 2rem;
  }
  .title-japanese {
    font-size: 1.25rem;
  }
}.title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-top: 0;
  margin-bottom: 8px;
  text-align: left;
  display: inline-block;
  padding: 2px 8px;
  border-radius: 4px;
}.compatible-title {
  font-size: 1.5rem;
  font-weight: 400;
  text-align: left;
  margin-bottom: 8px;
  color: var(--text);
}#resultScreen h3,
#resultText h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-top: 16px;
  margin-bottom: 8px;
  color: var(--primary);
}#resultText p {
  font-size: 1rem;
  margin-bottom: 16px;
}.color-name {
  font-weight: 600;
  border: 1px solid #ddd;
  padding: 2px 8px;
  border-radius: 4px;
}hr {
  border: 0;
  border-top: 1px solid #ddd;
  margin: 16px 0;
}
  </style></head>
<body>
  <header>
    <nav class="header-nav">
      <a href="./about.html">パートナルとは</a>
      <span class="divider">|</span>
      <a href="./faq.html">よくある質問</a>
      <span class="divider">|</span>
      <a href="https://forms.gle/PstFm54KustR4zKs6">お問い合わせ</a>
    </nav>
  </header>
  <div class="container">
    <h1>
      <span class="title-topt">
        <span class="title-english">pertonal</span>
        <span class="title-japanese"> -パートナル-</span>
      </span>
      <span class="title-sub">「音」×「色」＝ New「性格診断」</span>
    </h1>
    <div id="startScreen" class="screen active">
      <div class="start-image">
        <picture>
          <source media="(min-width: 601px)" 
                  srcset="https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafybeifuttq27ioeycupsnmuj4u2kuvjtmg4ibhtxualf6mti2yxa5abbe" 
                  type="image/jpeg">
          <source media="(max-width: 600px)" 
                  srcset="https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafybeiep45zdax5g37aatlprfzu63rzs66qpzqioyjmlgpezzjcpolbxya" 
                  type="image/jpeg">
          <img src="https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafybeifuttq27ioeycupsnmuj4u2kuvjtmg4ibhtxualf6mti2yxa5abbe" 
               alt="メイン画像" 
               loading="lazy">
        </picture>
      </div>
      <button id="startBtn">▶︎▶︎▶︎ 今すぐ無料診断 ◀︎◀︎◀︎</button>
    </div>
    <div id="questionScreen" class="screen">
      <div class="progress-bar"><div id="progInner" class="progress-inner"></div></div>
      <div class="question"><h2 id="questionText"></h2></div>
      <ul id="optionsList" class="options"></ul>
      <div class="nav"><button id="backBtn">◀︎ 1つ前へ</button></div>
    </div>
    <div id="resultScreen" class="screen">
      <div id="resultImage" class="result-image"></div>
      <h3>あなたの調性格（パートナル）</h3>
      <div id="resultText"></div>
      <div class="share-row">
        <button id="shareXBtn">Xでシェアする</button>
      </div>
      <div class="goods-row">
        <button id="goodsBtn">公式グッズを見る</button>
      </div>
      <div class="restart-row"><button id="restartBtn">もう一度診断する</button></div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
  const personalityColors = {
    "C": { name: "ブライトレッド", code: "#FF3232" },
    "cm": { name: "ディープパープル", code: "#4C0099" },
    "D♭": { name: "ブライトアクア", code: "#3298FF" },
    "c♯m": { name: "ディープグリーン", code: "#009900" },
    "D": { name: "ブライトイエロー", code: "#FEFF32" },
    "dm": { name: "ディープローズ", code: "#99004C" },
    "E♭": { name: "ブライトパープル", code: "#9832FF" },
    "e♭m": { name: "ディープシアン", code: "#009899" },
    "E": { name: "ブライトグリーン", code: "#32FF32" },
    "em": { name: "ディープオレンジ", code: "#994C00" },
    "F": { name: "ブライトローズ", code: "#FF3299" },
    "fm": { name: "ディープブルー", code: "#000099" },
    "F♯": { name: "ブライトシアン", code: "#32FEFF" },
    "f♯m": { name: "ディープライム", code: "#4C9900" },
    "G": { name: "ブライトオレンジ", code: "#FF9932" },
    "gm": { name: "ディープマゼンタ", code: "#990098" },
    "A♭": { name: "ブライトブルー", code: "#3232FF" },
    "g♯m": { name: "ディープミント", code: "#00994C" },
    "A": { name: "ブライトライム", code: "#99FF32" },
    "am": { name: "ディープレッド", code: "#990000" },
    "B♭": { name: "ブライトマゼンタ", code: "#FF32FE" },
    "b♭m": { name: "ディープアクア", code: "#004C99" },
    "B": { name: "ブライトミント", code: "#32FF99" },
    "bm": { name: "ディープイエロー", code: "#989900" }
  };

  const characterDescriptions = {
    "C": `<span class="title" style="background-color: ${personalityColors['C'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【C型】騎士</span><p class="result-description">あなたは、どんな時も素直で、人としての信念を大切に生きる騎士。<br><br>
目立つ言葉や派手な振る舞いに頼らずとも、あなたがそこにいるだけで、まるで空にしっかりと輝く北極星のように、周囲に安心と信頼を与える存在です。<br><br>
あなたの言葉には飾り気がなく、行動には一貫性があります。<br><br>
だからこそ、多くを語らずとも、その佇まいだけで人の心を動かす力を持っています。<br><br>
周囲の人々は、あなたの静かな意志の強さに気づき、自然と背中を預けたくなるのです。<br><br>
困難や迷いが訪れても、あなたは自分の信じる道から目をそらしません。<br><br>
そのひとつひとつの選択が、信頼という名の橋を築き、やがて周囲の人々をも導く光となっていきます。<br><br>
あなたの魅力は、決して誰かを引っ張ることではなく、共に歩もうとする姿勢にあります。<br><br>
誰よりも誠実で、穏やかで、信じるもののために力を尽くすあなたの姿勢は、人々に温かさと勇気をもたらします。</p>`,
    "cm": `<span class="title" style="background-color: ${personalityColors['cm'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【cm型】鍛冶屋</span>
<p class="result-description">あなたは、静寂の中でひそかに創造の火を灯し続ける鍛冶屋。<br><br>
誠実に自分自身と向き合い、一本一本の刀を鍛え上げるように、自分の感覚や思いと対話しながら日々を積み重ねます。<br><br>
その姿は、見る者に深い安心と信頼を与えます。<br><br>
あなたの強さは、結果を急がず、自分のリズムで本質を見極めていくところにあります。<br><br>
時間を味方にし、熱と冷静さを手のひらで感じ取りながら、情熱や想いをじっくりと鍛えていく。<br><br>
その鍛錬の積み重ねが、あなたの内面の豊かさを物語ります。<br><br>
あなたが生み出すものは、派手さはなくとも、静かな光を放つ逸品。<br><br>
心を込めて打ち続けた刀のように、見る者に深い余韻と静かな力強さを伝えます。<br><br>
飾らず、どこまでも誠実で、温かな灯火のような存在感があります。<br><br>
あなたにとって「鍛える」という行為は、自分自身と向き合い、世界と静かにつながるための大切な時間。<br><br>
言葉にしなくても、その手が生み出すものには、あなたの真心と魂が込められています。</p>`,
    "D♭": `<span class="title" style="background-color: ${personalityColors['D♭'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【D♭型】思想家</span>
<p class="result-description">あなたは、物事の本質を見つめ、静かに真理を紡ぎ続ける思想家。<br><br>
表面にとらわれず、目に見えない流れや言葉の奥にある意味に敏感で、その思考はまるで深海を泳ぐ光のように、静けさのなかで確かに輝きを放ちます。<br><br>
あなたは常に、世界をより深く理解しようとしています。<br><br>
問いを投げかけることを恐れず、自分の内なる声に耳を澄ませながら、誰かのために、そして未来のために思考を重ねていく。<br><br>
そこにあるのは、純粋な知への探究心と、よりよい世界への静かな願いです。<br><br>
あなたの言葉には、誰かの価値観を優しく揺らし、心を深く耕す力があります。<br><br>
あなたの内にある知性は、決して誰かを見下すものではなく、共に理解を広げ、つながろうとする優しさに満ちています。<br><br>
他者の意見に耳を傾けながら、自分の軸はぶれない。<br><br>
その佇まいは、知恵を持つ導き手として、周囲に安心と尊敬をもたらします。<br><br>
複雑な状況でもあなたの言葉には道筋があり、その静かな論理は人々の視界をひらく灯火のようです。</p>`,
    "c♯m": `<span class="title" style="background-color: ${personalityColors['c♯m'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【c♯m型】創造主</span>
<p class="result-description">あなたは、夢と現実の狭間で壮大な構造を描き出す仮想世界の創造主。<br><br>
誰も見たことのない未来や、まだ言葉になっていない世界を、あなたは感覚と想像力で鮮やかに設計していきます。<br><br>
その発想はどこまでも自由で、現実の枠組みを超え、まるで星々が並ぶ夜空に橋を架けるようなスケールを持っています。<br><br>
あなたの魅力は、独自の感性と美意識。<br><br>
その中には、宇宙的な広がりと、細部への繊細なこだわりが同居しています。<br><br>
ひとつのアイデアを形にするために、空想の糸を手繰りながら、まるで音のない宇宙空間で建築を進めるように、静かに創造を続けるのです。<br><br>
他人には少し理解されにくいと思われる瞬間もあるかもしれません。<br><br>
でもそれは、あなたが一歩先の次元を見ている証。<br><br>
あなたの世界観は、時間とともに形を持ちはじめ、やがて多くの人の心に新しい景色をもたらすでしょう。<br><br>
あなたにとって、創造とは遊びであり、祈りであり、世界との深い対話です。<br><br>
あなたが描く未来図には、まだ見ぬ可能性が詰まっていて、それに触れた人は心の奥に希望の種を宿すことになります。</p>`,
    "D": `<span class="title" style="background-color: ${personalityColors['D'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【D型】探検家</span>
<p class="result-description">あなたは、理想の光を胸に掲げ、力強く時代を切り拓く探検家。<br><br>
どんな状況でも、目の前の壁を越えていく情熱と行動力を持ち、あなたの存在は周囲に新しい可能性と希望をもたらします。<br><br>
あなたの心の奥には、明確な信念があります。<br><br>
ただ前へ進むだけでなく、何のために進むのか、誰のために変化を起こすのかを深く理解している。<br><br>
だからこそ、その一歩は力強く、誰かの勇気にもつながるのです。<br><br>
あなたの言葉や行動には、未来へのビジョンが宿っています。<br><br>
今はまだ見えない景色を信じて突き進む姿勢は、多くの人の心に火を灯し、「自分も前に進んでみたい」と思わせる魅力にあふれています。<br><br>
時にその勢いが周囲を驚かせることもあるかもしれませんが、あなたの根底にあるのは、愛と責任感。<br><br>
そして、誰かのためにより良い世界を創りたいという、静かで力強い願いです。</p>`,
    "dm": `<span class="title" style="background-color: ${personalityColors['dm'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【dm型】司書</span>
<p class="result-description">あなたは、感情の揺らぎを丁寧に読み取り、言葉にそっと結晶化する司書。<br><br>
目には見えない想いの流れを静かにすくい上げ、それぞれの物語に耳を傾けるあなたの在り方は、多くの人に深い安心と共感をもたらします。<br><br>
あなたの感性は、まるで朝露のように繊細で美しい。<br><br>
小さな変化にも気づき、誰かの心の奥にある言葉にならない感情さえも、まるで詩のように優しく汲み取ることができます。<br><br>
その静けさには、真のやさしさと深い知性が宿っています。<br><br>
あなたにとって言葉は、ただの情報ではなく、心を結ぶための鍵。<br><br>
文章や会話の中に、誰かの大切な記憶や願いを見つける力を持つあなたは、まるで感情の図書館を紐解く守り神のようです。<br><br>
周囲の人は、あなたの穏やかなまなざしと、的確であたたかな言葉に癒されます。<br><br>
派手ではなくても、あなたがその場にいることで、空気がやさしく整い、人々は素直になっていきます。</p>`,
    "E♭": `<span class="title" style="background-color: ${personalityColors['E♭'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【E♭型】賢者</span>
<p class="result-description">あなたは、静けさの中に深い知恵を宿し、すべてを調和へと導く賢者。<br><br>
自然のように穏やかで、誰といても心が安らぐその存在感は、まるで大地や森のように包み込む優しさをたたえています。<br><br>
あなたの魅力は、どんな意見や感情も一度受けとめ、そこに無理なく調和を見いだしていく力にあります。<br><br>
争うことなく、対立を恐れず、すべてのものが共に在れる道を見つけ出すあなたの姿勢は、まわりに安心と安定をもたらします。<br><br>
あなたの言葉は決して多くなくても、そのひと言には深い洞察が込められており、聞く人の心にそっと根を張ります。<br><br>
その存在は木陰のようで、誰かが疲れたとき、静かに寄り添い、自然と癒しを与える力を持っているのです。<br><br>
人と自然、理性と感情、過去と未来——<br><br>
すべてを隔てず、つなげる視点を持つあなたは、時に人々の橋となり、道しるべとなります。<br><br>
急がず、揺るがず、自分の軸を大切にしながらも、まわりと共に歩む姿勢は、多くの信頼を集めていくでしょう。</p>`,
    "e♭m": `<span class="title" style="background-color: ${personalityColors['e♭m'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【e♭m型】画家</span>
<p class="result-description">あなたは、静けさの中で色彩を紡ぎ出し、心の奥に咲く感情を美しさに変える画家。<br><br>
世界の微細な揺らぎにそっと耳を澄ませながら、誰も気づかない場所に光をあてて、そこにしかない美しさを見出していく感性の持ち主です。<br><br>
あなたが向き合うのは、目に見える華やかさではなく、深く静かな感情のゆらめき。<br><br>
その繊細な手つきと優しい眼差しで、まるでキャンバスに筆を落とすように、人生の一瞬一瞬を丁寧に彩っていきます。<br><br>
あなたにとって「美」とは、飾りではなく祈りのようなもの。その人らしさを大切にする、心からの敬意に満ちています。<br><br>
あなたの存在は、騒がしい場所でも決してかき消されることなく、ひとしずくの静けさとして、人の心に残ります。<br><br>
声高に語らなくとも、あなたが選んだ色や形が語る想いは、言葉以上に豊かで、やさしく心に届くのです。<br><br>
誰かの悲しみも、喜びも、過ぎてゆく季節のように受け入れ、そこに調和と美しさを添えていく。<br><br>
あなたの仕事は、感情の余韻にそっと色を差す、詩的な営みでもあります。</p>`,
    "E": `<span class="title" style="background-color: ${personalityColors['E'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【E型】演奏家</span>
<p class="result-description">あなたは、心の奥から湧き上がる歓びを音に乗せて放つ演奏家。<br><br>
その存在はまるで朝の陽光のように明るく、人々の心をやさしく照らし、世界にポジティブな響きをもたらします。<br><br>
あなたが持つのは、誰かを励ましたい、楽しませたいという自然な想い。<br><br>
だからこそ、あなたの言葉やふるまいにはあたたかさがあり、周囲の人々はあなたといるだけで、心が軽くなるのです。<br><br>
まるで音楽のように、あなたの笑顔や行動がその場の空気を変えていく——<br><br>
そんな不思議な力を持っています。<br><br>
あなたはただ明るいだけではなく、その明るさの裏側には、他人の感情を察し、寄り添おうとする深い思いやりがあります。<br><br>
誰かの小さな変化に気づき、その人が自然体でいられるような空間をそっとつくるのが得意なのです。<br><br>
あなたにとって人生とは、一度きりのライブ演奏。<br><br>
多少のミスやトラブルがあっても、その瞬間を楽しみ尽くす姿勢こそが、あなたの最大の魅力です。<br><br>
その姿は周囲にも元気を与え、挑戦する勇気を与えます。</p>`,
    "em": `<span class="title" style="background-color: ${personalityColors['em'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【em型】遊牧民</span>
<p class="result-description">あなたは、広い世界を舞台に、どこまでも自由に生きる遊牧民。<br><br>
ひとつ場所にとどまることなく、心の赴くままに歩み続けるあなたの姿は、まさに大地を駆ける風そのもの。<br><br>
自分の直感や感情に正直に従い、しがらみに縛られず、どんな時も自然体でいられるのが最大の魅力です。<br><br>
あなたの生き方は型にはまらず、誰かと無理に足並みをそろえることもありません。<br><br>
必要ならひとりで静かに過ごし、ときには仲間と笑い合い、状況や気分によって自由自在に“居場所”を変えられます。<br><br>
そのしなやかさと柔軟さは、多くの人の憧れであり、あなたが通り過ぎるたびに新しい風と刺激が周囲にもたらされます。<br><br>
自由とは、ただ束縛がないだけではなく、自分の「本当の声」を大切にし、他者の自由も認めていける優しさのこと。<br><br>
あなたがそばにいると、人々はありのままの自分を思い出し、心が自然とほぐれていきます。<br><br>
変化を楽しみ、「今この瞬間」を何より大切にするあなたは、どこまでも風とともに歩み続け、訪れる場所すべてに新しい息吹をもたらす存在です。</p>`,
    "F": `<span class="title" style="background-color: ${personalityColors['F'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【F型】発明家</span>
<p class="result-description">あなたは、想像の中から奇跡を取り出す発明家。<br><br>
現実にとらわれず、ふとした瞬間に心を飛ばしては、誰も思いつかない発想を軽やかに形にしていきます。<br><br>
あなたの思考はまるで空を飛ぶように自由で、遊び心と知性が絶妙に同居しています。<br><br>
あなたが生み出すものには、驚きとユーモア、そして深い意味が宿っています。<br><br>
日常のなかに潜む違和感や不思議を見逃さず、それらを楽しみながら再構築していくその力は、まわりの人に新しい視点とインスピレーションをもたらします。<br><br>
あなたの頭の中には、いつも小さな実験室や夢の工房があり、アイデアの種が絶えず芽吹いています。<br><br>
その発想は突飛に見えることもありますが、あなたの中ではすべてが緻密に結びついており、そこには確かなロジックと美意識があります。<br><br>
周囲の人々は、あなたのユニークな思考に心をくすぐられ、「もっと自由でいいんだ」と気づかされるでしょう。<br><br>
あなたは、常識に風穴をあける存在。<br><br>
けれどそれは破壊ではなく、優しい再構築なのです。</p>`,
    "fm": `<span class="title" style="background-color: ${personalityColors['fm'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【fm型】小説家</span>
<p class="result-description">あなたは、時のなかにそっと潜り込み、心の記憶から物語を紡ぐ小説家。<br><br>
人の感情の揺らぎや過ぎ去った出来事のぬくもりを、誰よりも繊細に感じ取り、それらをやさしく言葉にしていく才能の持ち主です。<br><br>
あなたが見つめているのは、決して忘れられるべきではない大切な「痕跡」。<br><br>
喜びも、痛みも、愛しさも──<br><br>
人生のすべての瞬間が意味を持っていると信じ、その断片を丁寧に拾い集めながら、物語というかたちで未来へと手渡していきます。<br><br>
あなたの中には、深い共感力があります。<br><br>
誰かの気持ちを代弁するように文章を紡いだり、曖昧な感情をそっと照らしたりするそのやさしさは、人々にとって癒しであり、心の居場所でもあります。<br><br>
静かな感性をもって、あなたは時間の流れと向き合います。<br><br>
過去を振り返ることは、ただ懐かしむためではなく、「いま」を豊かにし、「これから」を信じる力になると、あなたは知っているのです。</p>`,
    "F♯": `<span class="title" style="background-color: ${personalityColors['F♯'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【F♯型】建築士</span>
<p class="result-description">あなたは、高みから全体を見渡しながら、美しく整った世界を描き出す建築士。<br><br>
目に見えない構造の中に調和を見出し、曖昧なものを明確に、混沌を静かに整えていく力を持つ、思考の芸術家です。<br><br>
あなたの強みは、卓越した論理性と構造的な美意識。<br><br>
細部まで目が行き届くその知性は、まるで緻密に設計された都市のように、確かな土台と洗練されたラインを併せ持っています。<br><br>
あなたが築く世界には、計算されつくした静けさと、見る人の心を整える美が共存しているのです。<br><br>
あなたは、感情に流されることなく、落ち着いたまなざしで物事を俯瞰します。<br><br>
だからこそ、周囲の人々はあなたに信頼を寄せ、あなたの示す指針に安心感を覚えます。<br><br>
すべてがうまく噛み合うまで妥協しない姿勢は、目には見えにくくても、多くの人の未来を支える土台となっています。<br><br>
冷静さの奥には、揺るぎない情熱があります。<br><br>
完璧を目指すのは、自分のためだけではなく、誰かが安心してその空間に身を委ねられるようにという、深いやさしさがあるのです。</p>`,
    "f♯m": `<span class="title" style="background-color: ${personalityColors['f♯m'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【f♯m型】錬金術師</span>
<p class="result-description">あなたは、静寂の中で深く思考をめぐらせ、誰も見たことのない価値を生み出す錬金術師。<br><br>
他者に流されず、自らの内側にある真理を見つめ、心の中で何度も練り上げた答えを、自分だけのかたちとしてこの世界に提示していきます。<br><br>
あなたの内面は、澄んだ湖のように深く、静かで、研ぎ澄まされています。<br><br>
一見、近寄りがたい印象を与えることもありますが、その奥にはとてつもなく純粋な探究心と、真実を見つけ出したいという強い情熱が宿っています。<br><br>
あなたの言葉や作品には、触れる者の心を一瞬で射抜くような力があるのです。<br><br>
人と群れることよりも、自分自身の内なる声を大切にするあなたは、孤独さえも力に変えることができる稀有な存在。<br><br>
その姿勢は、どこか凛としていて、まるで誰にも真似できない錬金術を操るような、神秘的な魅力を放ちます。<br><br>
あなたが手がけるものは、時間が経っても色褪せず、やがて多くの人にとって「本物」として認識されていくでしょう。<br><br>
なぜなら、それは表面的な流行ではなく、あなたの魂から練り上げられた唯一無二の結晶だからです。</p>`,
    "G": `<span class="title" style="background-color: ${personalityColors['G'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【G型】狙撃手</span>
<p class="result-description">あなたは、目に見えぬ未来を信じて矢を放つ狙撃手。<br><br>
過去に縛られることなく、希望という空にまっすぐ矢を放つその姿は、多くの人に勇気を与え、前を向く力となります。<br><br>
あなたの行動にはいつも目的があり、曖昧な状況にも自ら風穴を開けて進もうとする強さがあります。<br><br>
困難や未知に対しても臆することなく、自らの信じた道を突き進むあなたの姿勢は、多くの人にとって指標となり、進む勇気を灯します。<br><br>
あなたの心は、まっすぐで潔い。<br><br>
無駄を嫌い、本質を見極め、最短距離で目標に向かっていくその精神は、まるで一点の曇りもない青空のようです。<br><br>
周囲が迷っているときも、あなたは「向かうべき方角」を射抜く感覚を持っています。<br><br>
けれどあなたは、ただの強者ではありません。<br><br>
人を背負う覚悟と、自分の力で誰かを照らしたいという優しさが、芯の強さの中に静かに宿っています。<br><br>
だからこそ、あなたが放つ言葉や行動には、重みと信頼があるのです。</p>`,
    "gm": `<span class="title" style="background-color: ${personalityColors['gm'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【gm型】探偵</span>
<p class="result-description">あなたは、物静かな夜に真実のかけらを探し続ける探偵。<br><br>
どんなに険しい霧の中でも、わずかな違和感や感情の揺らぎを見逃さず、人の心の奥底にある真実に静かに近づいていきます。<br><br>
あなたの洞察力は、まるで闇夜に光る星のように澄み渡っています。<br><br>
物事の表層に惑わされることなく、その裏にある想いや本質に目を向けるあなたは、誰よりも誠実で信頼できる存在。<br><br>
人はあなたの前では、自然と本当の気持ちを打ち明けたくなるでしょう。<br><br>
あなたが大切にしているのは「事実」だけではなく、「心の声」。<br><br>
真実とは何かを静かに問いかけながらも、誰かを裁くのではなく理解しようとするまなざしを持っています。<br><br>
あなたの視線は厳しさの中にも温かさがあり、そこには思いやりが溢れています。<br><br>
控えめでありながらも芯が強く、あなたの存在は、夜の中に差し込むひとすじの月光のよう。<br><br>
目立たないところで黙々と誰かを支え、混乱を整理し、確かな安心をもたらすことでしょう。</p>`,
    "A♭": `<span class="title" style="background-color: ${personalityColors['A♭'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【A♭型】舞踏家</span>
<p class="result-description">あなたは、どんな場面でも気品を忘れず、人々をやわらかな流れへと導く舞踏家。<br><br>
一挙手一投足に美しさが宿り、あなたの存在そのものが周囲に調和と安らぎをもたらします。<br><br>
あなたは、ただ自分を飾るためではなく、場全体の空気を整え、人々の心がほどけていくような優雅さを自然にまとっています。<br><br>
誰かを目立たせるために一歩引いたり、重くなりすぎた空気をさりげなく和らげたり——<br><br>
あなたの気遣いはあまりにも自然で、まるで見えない舞踏のように場を整えていくのです。<br><br>
あなたが大切にしているのは、言葉よりも「所作」や「空気感」。<br><br>
その所作ひとつに宿るやさしさと知性は、まるで舞台で静かに踊るダンサーのように、観る者の心を穏やかに包み込みます。<br><br>
だからこそ、あなたのそばにいると、人々は少しずつ素直になっていけるのです。<br><br>
華やかさと落ち着き、その両方を併せ持つあなたは、場を導く存在でありながら、決して前に出すぎない美しいバランス感覚の持ち主です。<br><br>
あなたのふるまいは、日々の何気ない場面を特別な舞台へと変えていく、静かな魔法のようです。</p>`,
    "g♯m": `<span class="title" style="background-color: ${personalityColors['g♯m'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【g♯m型】収集家</span>
<p class="result-description">あなたは、誰もが見逃すような美の欠片を拾い集め、心の奥にひっそりと並べていく収集家。<br><br>
騒がしい世界の喧騒を離れ、あなただけの静かな感覚で、誰にも模倣できない美の世界を築き上げます。<br><br>
あなたの魅力は、静かでありながら強い。<br><br>
その眼差しは、表面的な煌びやかさには揺るがず、むしろ儚さや陰影にこそ価値を見出します。<br><br>
誰もが通り過ぎるような場所にふと立ち止まり、そこに潜む詩を見つけることができる。<br><br>
そんなあなたの感性は、まるで夢の中にだけ存在する美術館のようです。<br><br>
あなたにとって、美しさとは「完成されたもの」ではなく、「感じ取る力」。<br><br>
不完全であっても、そこに宿る物語や魂を見逃さず、静かに愛おしむその姿勢は、まさに孤高の収集家そのものです。<br><br>
あなたは、語るよりも見つめ、飾るよりも残す人。<br><br>
だからこそ、あなたが紡ぐ沈黙には深い意味があり、あなたが残した選択には美の哲学が宿っています。<br><br>
その存在は、あまりに繊細で、気づく者にしか届かない——<br><br>
けれど一度出会えば、誰の心にも永遠に残る「幻」のような魅力を持っているのです。</p>`,
    "A": `<span class="title" style="background-color: ${personalityColors['A'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【A型】参謀長</span>
<p class="result-description">あなたは、その知性と熱意を武器に、人々を正しく導く参謀長。<br><br>
熱く燃える心と冷静な判断力、その両方をあわせ持つあなたは、理想を現実へと変える現代の戦略家です。<br><br>
あなたは、ただ突き進むだけの熱さではなく、その情熱を「どう使えば周囲に力を与えられるか」を常に考えています。<br><br>
情勢を見極め、状況に応じて言葉を選び、タイミングを読み、最も効果的な一手を打つ——<br><br>
その洗練された動きは、まるで光の道筋を描くようです。<br><br>
けれど、あなたの内側には、決して揺るがない「想い」があります。<br><br>
それは、誰かを勝たせたいという情、何かを成し遂げたいという志、そして希望を絶やさぬ強い光。<br><br>
その光は、まるで太陽のように周囲を温め、明るい未来を信じさせてくれます。<br><br>
あなたの指揮のもとでは、みな自分の力を信じられるようになり、行動に迷いがなくなります。<br><br>
あなた自身が道を切り拓く存在でありながら、同時に仲間に勇気と戦略を授ける、太陽のような存在なのです。</p>`,
    "am": `<span class="title" style="background-color: ${personalityColors['am'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【am型】詩人</span>
<p class="result-description">あなたは、心に浮かんだ情景をそっと言葉に変える詩人。<br><br>
ありふれた日々の中に潜む切なさや温もりを、誰よりも繊細に感じ取り、静かな語り口で世界に届ける感性の表現者です。<br><br>
あなたの言葉は、押しつけがましくなく、それでいて不思議な余韻を残します。<br><br>
直接的ではないけれど、読む人、聴く人の心の奥に、ふと影を落とし、優しく波紋を広げるような力があるのです。<br><br>
あなたが見つめているのは、過ぎ去るものの美しさ。<br><br>
黄昏に染まる空のように、儚さの中に強さを感じ取り、それを丁寧に綴っていくあなたの姿勢は、まるで静かな祈りのようです。<br><br>
悲しみを否定せず、孤独に寄り添いながらも、あなたの作品には必ず希望の光が差しています。<br><br>
それは、あなた自身がどんな感情も否定せず、大切に抱いてきたからこそ生まれる、深いやさしさの表れです。</p>`,
    "B♭": `<span class="title" style="background-color: ${personalityColors['B♭'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【B♭型】案内人</span>
<p class="result-description">あなたは、見えない流れを感じ取り、まだ誰も知らない道を照らす案内人。<br><br>
思考よりもひらめきを信じ、理屈では辿り着けない真実を、まるで星の光を頼りにたどるように見つけ出す不思議な力の持ち主です。<br><br>
あなたは、予測不能な場面でも風の向きを読むように流れを掴みます。<br><br>
直感的な判断にはっとさせられることも多く、その選択が気づけば最良の結果を生んでいた──<br><br>
そんなことが、あなたの周りでは自然と起こるのです。<br><br>
あなたの感覚は、時に人より先に未来を感じ取ります。<br><br>
それは特別な魔法ではなく、あなたが常に「今この瞬間」に心を開いているから。<br><br>
変化を恐れず、固定観念にとらわれない自由な発想が、あなたに星のような閃きをもたらしています。<br><br>
そして何より、あなたの進む道には希望があります。<br><br>
迷う人々に向かって、そっと指差すように道を示し、どこか楽しげに背中を押してくれるあなたの姿は、まるで夜空に輝くナビゲーターのようです。</p>`,
    "b♭m": `<span class="title" style="background-color: ${personalityColors['b♭m'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【b♭m型】看護師</span>
<p class="result-description">あなたは、言葉にならない想いにそっと寄り添い、傷ついた心をやわらかく包み込む看護師。<br><br>
目立つことは好まずとも、あなたの存在はいつも誰かの心の片隅でそっと灯り続けています。<br><br>
あなたの優しさは、押しつけではなく「気づき」。<br><br>
何も言わずとも、そっと差し出されるまなざしや仕草に、深い理解とやさしい共感がにじんでいます。<br><br>
誰かが疲れているとき、悲しみに沈んでいるとき、あなたはその空気を敏感に感じ取り、そっとそばにいてくれるのです。<br><br>
あなたの癒しは、にぎやかな励ましではなく、静かな安心。<br><br>
一緒にいるだけで呼吸が落ち着き、心がほどけていくような穏やかな波長を持っています。<br><br>
それはまるで、夜空にやさしく浮かぶ月のように、傷を責めず、照らすように寄り添う光です。<br><br>
あなたは、人の痛みや孤独を否定せず、それすらも一つの大切な感情として受け止めます。<br><br>
だからこそ、あなたのそばにいると、人はありのままの自分でいられることに気づき、少しずつ癒されていくのです。</p>`,
    "B": `<span class="title" style="background-color: ${personalityColors['B'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【B型】剣闘士</span>
<p class="result-description">あなたは、逆風の中でさえ舞い上がり、自らの力で道を切り拓く剣闘士。<br><br>
たとえ困難な状況にあっても、軽やかに身を翻し、しなやかな強さで現実を乗り越えていくエネルギーの化身です。<br><br>
あなたの最大の魅力は、その「粘り強い柔軟さ」。<br><br>
正面からぶつかるだけが強さではないことを、本能的に知っていて、まるで陽炎のように揺らぎながらも確かな存在感を放ちます。<br><br>
「無理を通す」よりも「流れを見切る」——<br><br>
その判断力と感覚は天性のもの。<br><br>
あなたは、変化を恐れず、予期せぬ展開すらも舞台の一部として受け入れ、自由自在に対応します。<br><br>
だからこそ、どんな場面でも自分らしさを失わず、いつの間にかピンチをチャンスに変えてしまう力を持っているのです。<br><br>
あなたの中には、静かなる反骨精神が宿っています。<br><br>
周囲の常識や固定観念にしばられることなく、自分の信じる道を貫く姿勢は、多くの人に勇気を与えるでしょう。<br><br>
しかも、それを重々しくなく、どこか軽やかに、楽しげに成し遂げるのがあなたの魅力です。</p>`,
    "bm": `<span class="title" style="background-color: ${personalityColors['bm'].code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">【bm型】魔術師</span>
<p class="result-description">あなたは、感情を燃やしながらも静かに言葉を紡ぎ、真実と向き合う魔術師。<br><br>
表面上は穏やかでも、その奥底には揺るぎない意志と、どんな苦難にも立ち向かう強靭な魂が宿っています。<br><br>
あなたの語る言葉には、重みと信念があります。<br><br>
それは単なる理想論ではなく、現実を見つめ抜いた者だけが辿り着ける「覚悟の詩」。<br><br>
その響きは多くの人の胸に深く届き、静かに力を与えます。<br><br>
あなたは、痛みを知っているからこそ優しく、闇を歩んできたからこそ光を信じられる人。<br><br>
戦いの中でさえ、決して怒りや憎しみだけに染まらず、言葉と想いの力で道を切り拓こうとするあなたの姿勢には、崇高な精神性が漂っています。<br><br>
自己犠牲ではなく、選び取った「覚悟」としての強さ。<br><br>
それを背負ってなお、周囲を思いやるあなたは、真の意味で強くて優しい存在です。<br><br>
誰かが苦しんでいるとき、あなたの一声は火となり、水となり、支えとなるでしょう。</p>`
  };

  const customFirstLines = {
  "C": "あなたは誠実で信頼を築く騎士タイプです。",
  "cm": "あなたは静かに創造を続ける鍛冶屋タイプです。",
  "D♭": "あなたは真理を追求する思想家タイプです。",
  "c♯m": "あなたは壮大な世界を描く創造主タイプです。",
  "D": "あなたは情熱で道を切り開く探検家タイプです。",
  "dm": "あなたは感情を言葉に変える司書タイプです。",
  "E♭": "あなたは調和を導く賢者タイプです。",
  "e♭m": "あなたは感情を美に変える画家タイプです。",
  "E": "あなたは歓びを届ける演奏家タイプです。",
  "em": "あなたは自由に生きる遊牧民タイプです。",
  "F": "あなたは奇跡を発明する発明家タイプです。",
  "fm": "あなたは物語を紡ぐ小説家タイプです。",
  "F♯": "あなたは調和を設計する建築士タイプです。",
  "f♯m": "あなたは真理を錬成する錬金術師タイプです。",
  "G": "あなたは未来を射抜く狙撃手タイプです。",
  "gm": "あなたは真実を探す探偵タイプです。",
  "A♭": "あなたは気品で導く舞踏家タイプです。",
  "g♯m": "あなたは美を収集する収集家タイプです。",
  "A": "あなたは戦略で導く参謀長タイプです。",
  "am": "あなたは情景を言葉にする詩人タイプです。",
  "B♭": "あなたは道を示す案内人タイプです。",
  "b♭m": "あなたは心に寄り添う看護師タイプです。",
  "B": "あなたは困難を乗り越える剣闘士タイプです。",
  "bm": "あなたは信念を言葉にする魔術師タイプです。"
};  const compatibleKeys = {
    "C": ["cm", "am", "G", "F"],
    "cm": ["C", "E♭", "gm", "fm"],
    "D♭": ["c♯m", "g♯m", "A♭", "F♯"],
    "c♯m": ["D♭", "E", "g♯m", "f♯m"],
    "D": ["dm", "bm", "A", "G"],
    "dm": ["D", "F", "am", "gm"],
    "E♭": ["e♭m", "cm", "B♭", "A♭"],
    "e♭m": ["E♭", "F♯", "b♭m", "g♯m"],
    "E": ["em", "c♯m", "B", "A"],
    "em": ["E", "G", "bm", "am"],
    "F": ["fm", "dm", "C", "B♭"],
    "fm": ["F", "A♭", "cm", "b♭m"],
    "F♯": ["f♯m", "e♭m", "D♭", "B"],
    "f♯m": ["F♯", "A", "c♯m", "bm"],
    "G": ["gm", "em", "D", "C"],
    "gm": ["G", "B♭", "dm", "cm"],
    "A♭": ["g♯m", "fm", "E♭", "D♭"],
    "g♯m": ["A♭", "B", "e♭m", "c♯m"],
    "A": ["am", "f♯m", "E", "D"],
    "am": ["A", "C", "em", "dm"],
    "B♭": ["b♭m", "gm", "F", "E♭"],
    "b♭m": ["B♭", "D♭", "fm", "e♭m"],
    "B": ["bm", "g♯m", "F♯", "E"],
    "bm": ["B", "D", "f♯m", "em"]
  };  const famousSongs = {
    "C": {
      "これはテストです1",
      "これはテストです２",
      "これはテストです３",
      "これはテストです４",
      "これはテストです５",
      "これはテストです６"
    },
    "cm": {
      "ショパン - ノクターン Op.9 No.2",
      "井上陽水 - 少年時代",
      "Mr.Children - Tomorrow never knows",
      "Aimer - 残響散歌"
    },
    "D♭": {
      "リスト - 愛の夢 第3番",
      "松田聖子 - 赤いスイートピー",
      "B'z - LOVE PHANTOM",
      "Ado - 新時代"
    },
    "c♯m": {
      "ベートーヴェン - 月光ソナタ 第1楽章",
      "オフコース - さよなら",
      "スピッツ - ローテンダイヤモンド",
      "King Gnu - 一途"
    },
    "D": {
      "バッハ - G線上のアリア",
      "サザンオールスターズ - いとしのエリー",
      "SMAP - 世界に一つだけの花",
      "Official髭男dism - ミックスナッツ"
    },
    "dm": {
      "シューベルト - アヴェ・マリア",
      "中島みゆき - 時代",
      "DREAMS COME TRUE - LOVE LOVE LOVE",
      "YOASOBI - 群青"
    },
    "E♭": {
      "モーツァルト - ピアノ協奏曲第21番",
      "松任谷由実 - 卒業写真",
      "安室奈美恵 - CAN YOU CELEBRATE?",
      "YOASOBI - ハルジオン"
    },
    "e♭m": {
      "ラフマニノフ - 前奏曲 Op.3 No.2",
      "井上陽水 - リバーサイドホテル",
      "浜崎あゆみ - SEASONS",
      "藤井風 - きらり"
    },
    "E": {
      "ベートーヴェン - 交響曲第9番『歓喜の歌』",
      "エルヴィス・プレスリー - Can't Help Falling in Love",
      "嵐 - Love so sweet",
      "Ado - うっせぇわ"
    },
    "em": {
      "バッハ - トッカータとフーガ",
      "沢田研二 - 勝手にしやがれ",
      "ニルヴァーナ - Where Did You Sleep Last Night",
      "YOASOBI - 夜に駆ける"
    },
    "F": {
      "ヴィヴァルディ - 四季『春』",
      "ルイ・アームストロング - What a Wonderful World",
      "MISIA - Everything",
      "Official髭男dism - I LOVE..."
    },
    "fm": {
      "ショパン - バラード第1番",
      "ビル・ウィザース - Ain't No Sunshine",
      "コブクロ - 蕾",
      "藤井風 - 青春病"
    },
    "F♯": {
      "リスト - ラ・カンパネラ",
      "フランク・シナトラ - My Way",
      "GReeeeN - キセキ",
      "YOASOBI - 怪物"
    },
    "f♯m": {
      "バッハ - 前奏曲とフーガ BWV 846",
      "松山千春 - 恋",
      "RADWIMPS - スパークル",
      "Aimer - カタオモイ"
    },
    "G": {
      "ベートーヴェン - 交響曲第5番『運命』",
      "サイモン＆ガーファンクル - The Sound of Silence",
      "いきものがかり - YELL",
      "Official髭男dism - Pretender"
    },
    "gm": {
      "モーツァルト - レクイエム",
      "加藤登紀子 - 知床旅情",
      "アデル - Someone Like You",
      "YOASOBI - たぶん"
    },
    "A♭": {
      "ショパン - エチュード Op.10 No.3『別れの曲』",
      "ホイットニー・ヒューストン - I Will Always Love You",
      "EXILE - Lovers Again",
      "藤井風 - まつり"
    },
    "g♯m": {
      "ドビュッシー - 夢想",
      "吉田拓郎 - 人生を語らず",
      "YUI - CHE.R.RY",
      "Ado - 踊"
    },
    "A": {
      "バッハ - ブランデンブルク協奏曲第3番",
      "ボブ・ディラン - Blowin' in the Wind",
      "ケミストリー - PIECES OF A DREAM",
      "King Gnu - 白日"
    },
    "am": {
      "シューベルト - 即興曲 Op.90 No.3",
      "井上陽水 - 心もよう",
      "レディオヘッド - Creep",
      "YOASOBI - アンコール"
    },
    "B♭": {
      "ヴィヴァルディ - 四季『冬』",
      "ジャーニー - Don't Stop Believin'",
      "AKB48 - 恋するフォーチュンクッキー",
      "Official髭男dism - 115万キロのフィルム"
    },
    "b♭m": {
      "マーラー - 交響曲第5番 アダージェット",
      "森山直太朗 - さくら（独唱）",
      "back number - 高嶺の花子さん",
      "Aimer - 朝が来る"
    },
    "B": {
      "ベートーヴェン - 交響曲第7番",
      "クイーン - Bohemian Rhapsody",
      "福山雅治 - 桜坂",
      "YOASOBI - 勇者"
    },
    "bm": {
      "ショスタコーヴィチ - ワルツ第2番",
      "山下達郎 - RIDE ON TIME",
      "flumpool - 君に届け",
      "藤井風 - 何なんw"
    }

    function addFamousSong(key, song) {
  if (!famousSongs[key]) famousSongs[key] = [];
  famousSongs[key].push(song);
}
    
  };  const displayImageUrls = {
    "C": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "cm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "D♭": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "c♯m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "D": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "dm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "E♭": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "e♭m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "E": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "em": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "F": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "fm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "F♯": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "f♯m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "G": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "gm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "A♭": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "g♯m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "A": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "am": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "B♭": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "b♭m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "B": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4",
    "bm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/bafkreih7kgft7gwa4lozqqo5xrvlsurswwp5o5m47lz6zaopwdzk6u6mg4"
  };
      const shareImageUrls = {
      "C": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_C",
      "cm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_cm",
      "D♭": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_Db",
      "c♯m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_csm",
      "D": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_D",
      "dm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_dm",
      "E♭": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_Eb",
      "e♭m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_ebm",
      "E": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_E",
      "em": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_em",
      "F": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_F",
      "fm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_fm",
      "F♯": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_Fs",
      "f♯m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_fsm",
      "G": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_G",
      "gm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_gm",
      "A♭": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_Ab",
      "g♯m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_gsm",
      "A": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_A",
      "am": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_am",
      "B♭": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_Bb",
      "b♭m": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_bbm",
      "B": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_B",
      "bm": "https://copper-glamorous-bass-418.mypinata.cloud/ipfs/share_image_bm"
    };
  const questions = [
    {
      "id": "Q1",
      "text": "Q1. 「あなたの部屋」を表す言葉は？",
      "options": [
        {"text": "整理整頓されている", "points": {"F♯": 3, "B": 2, "A": 1}},
        {"text": "気分で配置を変える", "points": {"em": 3, "F": 2, "B♭": 1}},
        {"text": "静かで落ち着く空間", "points": {"E♭": 3, "gm": 2, "cm": 1}},
        {"text": "汚くても安心できる", "points": {"fm": 3, "bm": 2, "dm": 1}},
        {"text": "最小限でスッキリと", "points": {"C": 3, "G": 2, "f♯m": 1}},
        {"text": "好きな物でいっぱい", "points": {"g♯m": 3, "e♭m": 2, "am": 1}}
      ]
    },
    {
      "id": "Q2",
      "text": "Q2. 子どもの頃、よく言われたセリフは？",
      "options": [
        {"text": "「落ち着いてるよね」", "points": {"gm": 3, "E♭": 2, "dm": 1}},
        {"text": "「自由すぎる子だね」", "points": {"em": 3, "F": 2, "B♭": 1}},
        {"text": "「頭の回転が早いね」", "points": {"F♯": 3, "B": 2, "f♯m": 1}},
        {"text": "「少し変わってるね」", "points": {"c♯m": 3, "F": 2, "g♯m": 1}},
        {"text": "「とっても親切だね」", "points": {"am": 3, "e♭m": 2, "b♭m": 1}},
        {"text": "「しっかりしてるね」", "points": {"C": 3, "A": 2, "G": 1}}
      ]
    },
    {
      "id": "Q3",
      "text": "Q3. 何かを作る際に大切にしたい事は？",
      "options": [
        {"text": "雰囲気の良さ", "points": {"g♯m": 3, "e♭m": 2, "F": 1}},
        {"text": "ストーリー性", "points": {"fm": 3, "bm": 2, "am": 1}},
        {"text": "構成と完成度", "points": {"F♯": 3, "B": 2, "D♭": 1}},
        {"text": "勘とスピード", "points": {"em": 3, "B♭": 2, "c♯m": 1}},
        {"text": "誰かに届ける", "points": {"E": 3, "A": 2, "E♭": 1}},
        {"text": "思いを込める", "points": {"cm": 3, "dm": 2, "gm": 1}}
      ]
    },
    {
      "id": "Q4",
      "text": "Q4. チームで動く時はどんな役割？",
      "options": [
        {"text": "指示役や進行役を担う", "points": {"A": 3, "C": 2, "G": 1}},
        {"text": "アイデアで盛り上げる", "points": {"F": 3, "em": 2, "c♯m": 1}},
        {"text": "裏方でみんなを支える", "points": {"dm": 3, "b♭m": 2, "cm": 1}},
        {"text": "流れを読んで調整する", "points": {"E♭": 3, "gm": 2, "am": 1}},
        {"text": "少し離れて様子を見る", "points": {"f♯m": 3, "F♯": 2, "g♯m": 1}},
        {"text": "好きに動いて巻き込む", "points": {"B♭": 3, "B": 2, "D": 1}}
      ]
    },
    {
      "id": "Q5",
      "text": "Q5. 急に予定がキャンセルになったら？",
      "options": [
        {"text": "新しい予定を入れ直す", "points": {"C": 3, "A": 2, "F♯": 1}},
        {"text": "ぼーっとして休憩する", "points": {"cm": 3, "dm": 2, "b♭m": 1}},
        {"text": "ひとりの時間を楽しむ", "points": {"f♯m": 3, "g♯m": 2, "fm": 1}},
        {"text": "すぐに別の行動をとる", "points": {"em": 3, "B♭": 2, "F": 1}},
        {"text": "理由を考えて整理する", "points": {"gm": 3, "E♭": 2, "bm": 1}},
        {"text": "逆にチャンスと感じる", "points": {"B": 3, "c♯m": 2, "E": 1}}
      ]
    },
    {
      "id": "Q6",
      "text": "Q6. つい思わずやってしまうクセは？",
      "options": [
        {"text": "先のことばかり考える", "points": {"F♯": 3, "D♭": 2, "A": 1}},
        {"text": "悩みや不安を抱え込む", "points": {"f♯m": 3, "cm": 2, "bm": 1}},
        {"text": "空想や妄想が尽きない", "points": {"c♯m": 3, "g♯m": 2, "F": 1}},
        {"text": "すぐに何かを指摘する", "points": {"B": 3, "em": 2, "D": 1}},
        {"text": "周りの意見に流される", "points": {"am": 3, "e♭m": 2, "dm": 1}},
        {"text": "細かい部分を気にする", "points": {"bm": 3, "fm": 2, "gm": 1}}
      ]
    },
    {
      "id": "Q7",
      "text": "Q7. 「最高のリーダー」とはどんな人？",
      "options": [
        {"text": "正直で信念を持っている", "points": {"C": 3, "A": 2, "G": 1}},
        {"text": "温かく話を聞いてくれる", "points": {"E♭": 3, "am": 2, "dm": 1}},
        {"text": "常に的確な指示が出せる", "points": {"A": 3, "F♯": 2, "D♭": 1}},
        {"text": "面白くて遊びを忘れない", "points": {"F": 3, "em": 2, "B♭": 1}},
        {"text": "個性を受け止めてくれる", "points": {"e♭m": 3, "g♯m": 2, "f♯m": 1}},
        {"text": "実力があって背中で語る", "points": {"B": 3, "bm": 2, "gm": 1}}
      ]
    },
    {
      "id": "Q8",
      "text": "Q8. 大きな決断の時に重視するのは？",
      "options": [
        {"text": "信じている価値観", "points": {"C": 3, "am": 2, "A": 1}},
        {"text": "周りの様子や影響", "points": {"dm": 3, "e♭m": 2, "E♭": 1}},
        {"text": "己のセンスと直感", "points": {"em": 3, "B♭": 2, "F": 1}},
        {"text": "目的や未来の展望", "points": {"D": 3, "G": 2, "B": 1}},
        {"text": "情報や条件の比較", "points": {"F♯": 3, "D♭": 2, "bm": 1}},
        {"text": "自分自身との対話", "points": {"cm": 3, "f♯m": 2, "gm": 1}}
      ]
    },
    {
      "id": "Q9",
      "text": "Q9. 普段の朝の時間の過ごし方は？",
      "options": [
        {"text": "起きたらすぐに動き出す", "points": {"D": 3, "A": 2, "B": 1}},
        {"text": "しばらく気持ちを整える", "points": {"cm": 3, "dm": 2, "b♭m": 1}},
        {"text": "ルーティンを淡々と行う", "points": {"C": 3, "G": 2, "F♯": 1}},
        {"text": "その日の気持ちで変わる", "points": {"B♭": 3, "em": 2, "f♯m": 1}},
        {"text": "新しい楽しみを見つける", "points": {"F": 3, "am": 2, "E": 1}},
        {"text": "色々とアイデアを考える", "points": {"c♯m": 3, "g♯m": 2, "fm": 1}}
      ]
    },
    {
      "id": "Q10",
      "text": "Q10. 理想の休みの日の過ごし方は？",
      "options": [
        {"text": "自然の中でのんびりする", "points": {"dm": 3, "cm": 2, "gm": 1}},
        {"text": "とにかく趣味に没頭する", "points": {"g♯m": 3, "f♯m": 2, "e♭m": 1}},
        {"text": "やりたかった挑戦をする", "points": {"B": 3, "D": 2, "bm": 1}},
        {"text": "友人や恋人と会って話す", "points": {"A": 3, "C": 2, "F": 1}},
        {"text": "気分次第で自由に決める", "points": {"B♭": 3, "em": 2, "c♯m": 1}},
        {"text": "計画をしっかりと立てる", "points": {"F♯": 3, "D♭": 2, "fm": 1}}
      ]
    },
    {
      "id": "Q11",
      "text": "Q11. 自宅にいる時に地震が起きたら？",
      "options": [
        {"text": "ニュースで状況を把握", "points": {"F♯": 3, "D♭": 2, "bm": 1}},
        {"text": "動揺しながらも深呼吸", "points": {"C": 3, "A": 2, "G": 1}},
        {"text": "落ち着いてよく考える", "points": {"cm": 3, "f♯m": 2, "gm": 1}},
        {"text": "すぐに机の下に隠れる", "points": {"B": 3, "em": 2, "D": 1}},
        {"text": "家族の安否を確認する", "points": {"am": 3, "dm": 2, "e♭m": 1}},
        {"text": "マイペースに行動する", "points": {"F": 3, "B♭": 2, "g♯m": 1}}
      ]
    },
    {
      "id": "Q12",
      "text": "Q12. 「地球最後の日」に何をする？",
      "options": [
        {"text": "誰かにメッセージを遺す", "points": {"G": 3, "C": 2, "F♯": 1}},
        {"text": "今までの人生を振り返る", "points": {"am": 3, "fm": 2, "cm": 1}},
        {"text": "生き残る為の方法を探す", "points": {"B": 3, "D": 2, "bm": 1}},
        {"text": "お気に入りの音楽を聴く", "points": {"E": 3, "F": 2, "em": 1}},
        {"text": "大切な人と楽しく過ごす", "points": {"dm": 3, "e♭m": 2, "b♭m": 1}},
        {"text": "好きなだけ気ままに遊ぶ", "points": {"c♯m": 3, "g♯m": 2, "f♯m": 1}}
      ]
    }
  ];  let current = 0;
  let topKey = null;
  const answers = Array(questions.length).fill(null);
  const startBtn = document.getElementById('startBtn');
  const backBtn = document.getElementById('backBtn');
  const restartBtn = document.getElementById('restartBtn');
  const startScreen = document.getElementById('startScreen');
  const questionScreen = document.getElementById('questionScreen');
  const resultScreen = document.getElementById('resultScreen');
  const questionText = document.getElementById('questionText');
  const optionsList = document.getElementById('optionsList');
  const progInner = document.getElementById('progInner');
  const resultTextDiv = document.getElementById('resultText');  function getCharacterTitle(key) {
    const description = characterDescriptions[key];
    if (!description) return key;
    const match = description.match(/<span class="title"[^>]*>(.*?)<\/span>/);
    return match ? match[1] : key;
  }  function showScreen(screen) {
    [startScreen, questionScreen, resultScreen].forEach(s => {
      if (s) s.classList.remove('active');
    });
    if (screen) screen.classList.add('active');
    else console.error('showScreen: screen引数がnullです');
  }  function renderQuestion() {
    const q = questions[current];
    if (!q) {
      console.error('質問データが見つかりません: current =', current);
      return;
    }
    questionText.textContent = q.text;
    progInner.style.width = `${(current / questions.length) * 100}%`;
    optionsList.innerHTML = '';
    q.options.forEach((opt, idx) => {
      const li = document.createElement('li');
      if (answers[current] === idx) li.classList.add('selected');
      const btn = document.createElement('button');
      btn.textContent = opt.text;
      btn.onclick = () => {
        answers[current] = idx;
        console.log(`Question ${current + 1}: Selected option ${idx}, Answers:`, answers);
        if (current < questions.length - 1) {
          current++;
          renderQuestion();
        } else {
          showResult();
        }
      };
      li.appendChild(btn);
      optionsList.appendChild(li);
    });
    backBtn.style.display = current > 0 ? 'inline-block' : 'none';
  }  function prevQuestion() {
    if (current > 0) {
      current--;
      renderQuestion();
    }
  }  function showResult() {
    console.log('showResult called, answers:', answers);
    const totals = {};
    questions.forEach((q, qi) => {
      const sel = answers[qi];
      if (sel != null) {
        Object.entries(q.options[sel].points).forEach(([k, v]) => {
          totals[k] = (totals[k] || 0) + v;
        });
      }
    });const allAnswered = answers.every(answer => answer != null);
if (!allAnswered || Object.keys(totals).length === 0) {
  console.log('Not all questions answered or totals empty:', totals);
  resultTextDiv.innerHTML = `
    <p>エラー：すべての質問に回答してください。</p>
    <p>もう一度最初から診断を始めるか、前の質問に戻って回答してください。</p>
  `;
  showScreen(resultScreen);
  return;
}

topKey = Object.entries(totals).sort((a, b) => b[1] - a[1])[0][0];
console.log('Calculated topKey:', topKey, 'totals:', totals);
const displayImageUrl = displayImageUrls[topKey] || 'https://via.placeholder.com/800x600';
const shareImageUrl = shareImageUrls[topKey] || 'https://via.placeholder.com/1200x600';
document.getElementById('resultImage').innerHTML = `<img src="${displayImageUrl}" alt="${topKey}の画像" onerror="this.src='https://via.placeholder.com/800x600'">`;

const twitterImageMeta = document.querySelector('meta[name="twitter:image"]');
const twitterTitleMeta = document.querySelector('meta[name="twitter:title"]');
const twitterDescMeta = document.querySelector('meta[name="twitter:description"]');
const ogImageMeta = document.querySelector('meta[property="og:image"]');
const characterTitle = getCharacterTitle(topKey);

if (twitterImageMeta) twitterImageMeta.setAttribute('content', shareImageUrl);
if (ogImageMeta) ogImageMeta.setAttribute('content', shareImageUrl);
if (twitterTitleMeta) twitterTitleMeta.setAttribute('content', `私は${characterTitle} - パートナル診断`);
if (twitterDescMeta) twitterDescMeta.setAttribute('content', `音と色で私の性格を診断！私は${characterTitle}！あなたのパートナルは？今すぐ無料でチェック！`);

const compatible = compatibleKeys[topKey] || [];
const compatibleHTML = compatible
  .map(key => `<p class="compatible-title">${getCharacterTitle(key)}</p>`)
  .join('');

// topKey に対応する曲リストを取得（無ければ空配列）
const songList = famousSongs[topKey] || [];
// 配列をシャッフルして先頭4件を切り出し
const selected = [...songList]
  .sort(() => Math.random() - 0.5)
  .slice(0, 4);
// HTML 生成
const songsHTML = selected.length > 0
  ? selected.map(song => `<p>${song}</p>`).join('\n')
  : '<p>情報が見つかりませんでした。</p>';

const colorInfo = personalityColors[topKey] || { name: "不明", code: "#000000" };
const colorHTML = `
  <h3>あなたのパートナルカラー</h3>
  <p><span class="color-name" style="background-color: ${colorInfo.code} !important; padding: 2px 8px; border-radius: 4px; color: #FFF !important; display: inline-block;">${colorInfo.name}</span>  ${colorInfo.code}</p>
`;

const description = characterDescriptions[topKey] || '診断結果が見つかりませんでした。';
const customFirstLine = customFirstLines[topKey] || '診断結果が見つかりませんでした。';
const firstSentenceMatch = description.match(/<span class="title"[^>]*>.*?<\/span>\s*<p class="result-description">([^<]*?)(.*?)<\/p>/s);
let firstSentence = firstSentenceMatch ? firstSentenceMatch[1] : customFirstLine;
let remainingDescription = firstSentenceMatch ? firstSentenceMatch[2] : '';

const descriptionHTML = `  <div class="accordion">
    <span class="title" style="background-color: ${colorInfo.code}; color: #FFFFFF; padding: 2px 8px; border-radius: 4px;">${getCharacterTitle(topKey)}</span>
    <p class="result-description-first">${firstSentence}</p>
    ${remainingDescription ? `
      <button class="accordion-toggle" data-state="closed" aria-expanded="false" aria-controls="accordion-content-${topKey}">
        詳しく見る <span class="arrow">▼</span>
      </button>
      <div class="accordion-content" id="accordion-content-${topKey}">
        <p>${remainingDescription}</p>
      </div>
    ` : ''}
  </div>
`;

resultTextDiv.innerHTML = `
  ${descriptionHTML}
  <hr>
  ${colorHTML}
  <hr>
  <h3>あなたと相性の良いパートナル</h3>
  ${compatibleHTML || '<p>情報が見つかりませんでした。</p>'}
  <hr>
  <h3>あなたのパートナルの有名な曲</h3>
  ${songsHTML}
`;

// アコーディオンのイベントリスナーを追加
const accordionButtons = document.querySelectorAll('.accordion-toggle');accordionButtons.forEach(button => {
  // 既存のイベントリスナーをクリア（重複防止）
  button.removeEventListener('click', toggleAccordion);
  button.removeEventListener('keydown', toggleAccordion);
  button.addEventListener('click', () => toggleAccordion(button));
  button.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      toggleAccordion(button);
    }
  });
});
    console.log('Result screen HTML set, calling showScreen');
showScreen(resultScreen);  }function toggleAccordion(button) {
  console.log('Toggle accordion clicked:', button.getAttribute('data-state'));
  const content = button.nextElementSibling;
  const arrow = button.querySelector('.arrow');  if (!content || !arrow) {
    console.error('Accordion content or arrow not found:', { content, arrow });
    return;
  }  if (content.classList.contains('open')) {
    console.log('Closing accordion');
    content.classList.remove('open');
    content.style.maxHeight = '0';
    content.style.opacity = '0';
    button.setAttribute('data-state', 'closed');
    button.setAttribute('aria-expanded', 'false');
    button.innerHTML = '詳しく見る <span class="arrow">▼</span>';
  } else {
    console.log('Opening accordion, scrollHeight:', content.scrollHeight);
    content.classList.add('open');
    content.style.maxHeight = content.scrollHeight + 'px';
    content.style.opacity = '1';
    button.setAttribute('data-state', 'open');
    button.setAttribute('aria-expanded', 'true');
    button.innerHTML = '閉じる <span class="arrow">▲</span>';
  }
}  document.getElementById('shareXBtn').addEventListener('click', () => {
    if (topKey) {
     window.open(
  　　　`https://twitter.com/intent/tweet?text=${encodeURIComponent(`私は「${topKey}型」\nMBTIの次はコレ！音と色の性格診断「パートナル」\n今すぐ無料で相性チェック\n`)}&url=${encodeURIComponent(location.href)}`,
  　　　'_blank'
　　　);
    } else {
      console.warn('topKey is not set yet.');
    }
  });  document.getElementById('goodsBtn').addEventListener('click', () => {
    window.open('https://example.com/official-goods', '_blank');
  });  startBtn.onclick = () => {
    console.log('startBtn clicked, current:', current, 'answers:', answers);
    current = 0;
    answers.fill(null);
    renderQuestion();
    showScreen(questionScreen);
  };  backBtn.onclick = prevQuestion;  restartBtn.onclick = () => {
    console.log('restartBtn clicked');
    current = 0;
    answers.fill(null);
    topKey = null;
    resultTextDiv.innerHTML = '';
    showScreen(startScreen);
  };  showScreen(startScreen);
});
  </script><footer>
  <nav class="footer-nav">
    <a href="./terms.html">利用規約</a>
    <span class="divider">|</span>
    <a href="./privacy.html">プライバシーポリシー</a>
    <span class="divider">|</span>
    <a href="./operator.html">運営者情報</a>
  </nav>
  <p class="copyright">&copy; 2025 pertonal by mera takeru. All rights reserved.</p>
</footer>
</body>
</html>
